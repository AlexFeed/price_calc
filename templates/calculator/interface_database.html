<!DOCTYPE html>
{% load static %}
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Управление письмами</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="{% static 'styles/interface_database.css' %}">
    <script src="{% static 'js_scripts/interface_database.js' %}"></script>
</head>
<body class="not-logged-in">
    <header class="auth-only">
        <div class="logo">
            <div class="logo-icon">АТК</div>
            <h1>Управление письмами</h1>
        </div>
        <div class="user-info">
            <div class="user-avatar" id="userAvatar">U</div>
            <span id="userEmailDisplay"></span>
            <button class="logout-btn" id="logoutBtn">
                <i class="fas fa-sign-out-alt"></i>
                Выйти
            </button>
        </div>
    </header>

    <div class="auth-container">
        <div class="auth-form">
            <h2 class="auth-title">Вход в систему</h2>
            
            <div class="auth-tabs">
                <div class="auth-tab active" id="loginTab">Вход</div>
                <div class="auth-tab" id="registerTab">Регистрация</div>
            </div>
            
            <div id="loginForm">
                <div class="form-group">
                    <label for="loginEmail">Электронная почта</label>
                    <input type="email" id="loginEmail" placeholder="example@mail.com">
                </div>
                <div class="form-group">
                    <label for="loginPassword">Пароль</label>
                    <input type="password" id="loginPassword" placeholder="Введите пароль">
                </div>
                <button class="auth-btn" id="loginBtn">Войти</button>
                <div class="auth-error" id="loginError">Неверный email или пароль</div>
            </div>
            
            <div id="registerForm" class="hidden">
                <div class="form-group">
                    <label for="registerEmail">Электронная почта</label>
                    <input type="email" id="registerEmail" placeholder="example@mail.com">
                </div>
                <div class="form-group">
                    <label for="registerPassword">Пароль</label>
                    <input type="password" id="registerPassword" placeholder="Придумайте пароль">
                </div>
                <div class="form-group">
                    <label for="registerConfirmPassword">Подтвердите пароль</label>
                    <input type="password" id="registerConfirmPassword" placeholder="Повторите пароль">
                </div>
                <button class="auth-btn" id="registerBtn">Зарегистрироваться</button>
                <div class="auth-error" id="registerError">Ошибка регистрации</div>
            </div>
        </div>
    </div>

    <div class="container auth-only">
        <div class="dashboard">
            <div class="dashboard-header">
                <h2 class="dashboard-title">Обработка писем</h2>
                <div>
                    <button class="add-btn" id="openCalcBtn">
                        <i class="fas fa-calculator"></i>
                        Открыть калькулятор
                    </button>
                </div>
            </div>
            
            <div class="controls">
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" id="searchInput" placeholder="Поиск по клиенту или маршруту...">
                </div>
                <select class="filter-select" id="statusFilter">
                    <option value="all">Все статусы</option>
                    <option value="correct">Корректно</option>
                    <option value="incorrect">Некорректно</option>
                    <option value="pending">В обработке</option>
                </select>
                <button class="add-btn" id="addRecordBtn">
                    <i class="fas fa-plus"></i>
                    Добавить письмо
                </button>
            </div>
            
            <div class="data-container">
                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>ID письма</th>
                                <th>Клиент</th>
                                <th>Маршрут (откуда-куда)</th>
                                <th>Ставка</th>
                                <th>Дата расчёта</th>
                                <th>Корректность обработки</th>
                                <th>Действия</th>
                            </tr>
                        </thead>
                        <tbody id="recordsTableBody">
                            <!-- Записи будут добавляться динамически -->
                        </tbody>
                    </table>
                </div>
                
                <div class="pagination">
                    <div class="page-info">Показано 1-10 из 127 писем</div>
                    <div class="page-controls">
                        <button class="page-btn"><i class="fas fa-chevron-left"></i></button>
                        <button class="page-btn active">1</button>
                        <button class="page-btn">2</button>
                        <button class="page-btn">3</button>
                        <button class="page-btn">4</button>
                        <button class="page-btn">5</button>
                        <button class="page-btn"><i class="fas fa-chevron-right"></i></button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Модальное окно для добавления/редактирования записи -->
    <div class="modal" id="recordModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="modalTitle">Добавить письмо</h3>
                <button class="close-btn" id="closeModalBtn">&times;</button>
            </div>
            
            <div class="form-group">
                <label for="client">Клиент</label>
                <input type="text" id="client" placeholder="Введите название клиента">
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="routeFrom">Откуда</label>
                    <input type="text" id="routeFrom" placeholder="Город отправления">
                </div>
                <div class="form-group">
                    <label for="routeTo">Куда</label>
                    <input type="text" id="routeTo" placeholder="Город назначения">
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="rate">Ставка</label>
                    <input type="number" id="rate" placeholder="Введите ставку">
                </div>
                <div class="form-group">
                    <label for="calculationDate">Дата расчёта</label>
                    <input type="date" id="calculationDate">
                </div>
            </div>
            
            <div class="form-group">
                <label for="processingStatus">Корректность обработки</label>
                <select id="processingStatus">
                    <option value="correct">Корректно</option>
                    <option value="incorrect">Некорректно</option>
                    <option value="pending">В обработке</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="comments">Комментарии</label>
                <textarea id="comments" placeholder="Введите комментарии" rows="3"></textarea>
            </div>
            
            <div class="modal-footer">
                <button class="cancel-btn" id="cancelModalBtn">Отмена</button>
                <button class="save-btn" id="saveRecordBtn">Сохранить письмо</button>
            </div>
        </div>
    </div>

    <footer class="auth-only">
        <div class="footer-content">
            <div class="copyright">Система управления письмами &copy; 2023</div>
        </div>
    </footer>
</body>
</html>