<!doctype html>
{% load static %}
<html lang="ru">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Калькулятор цен</title>
    <link rel="stylesheet" href="{% static 'styles/atk_styles.css' %}">
    <link rel="stylesheet" href="{% static 'styles/index.css' %}">
    <script src="{% static 'js_scripts/index.js' %}"></script>
</head>
<body>
    <header>
        <div class="logo">
            <div class="logo-icon">АТК</div>
            <h1>АТК — Калькулятор</h1>
        </div>
        <div class="header-controls">
            <button class="letters-btn" id="lettersBtn">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path
                        d="M4 4H20C21.1 4 22 4.9 22 6V18C22 19.1 21.1 20 20 20H4C2.9 20 2 19.1 2 18V6C2 4.9 2.9 4 4 4Z"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M22 6L12 13L2 6" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                          stroke-linejoin="round"/>
                </svg>
                Управление письмами
            </button>

            <div class="notification-container">
                <button class="notification-btn" id="notificationBtn">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M18 8C18 6.4087 17.3679 4.88258 16.2426 3.75736C15.1174 2.63214 13.5913 2 12 2C10.4087 2 8.88258 2.63214 7.75736 3.75736C6.63214 4.88258 6 6.4087 6 8C6 15 3 17 3 17H21C21 17 18 15 18 8Z"
                            stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path
                            d="M13.73 21C13.5542 21.3031 13.3019 21.5547 12.9982 21.7295C12.6946 21.9044 12.3504 21.9965 12 21.9965C11.6496 21.9965 11.3054 21.9044 11.0018 21.7295C10.6982 21.5547 10.4458 21.3031 10.27 21"
                            stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <div class="notification-indicator" id="notificationIndicator">0</div>
                </button>
                <div class="notification-dropdown" id="notificationDropdown">
                    <div class="notification-header">
                        <h3>Уведомления</h3>
                        <span class="notification-count-text" id="notificationCount">0 новых</span>
                    </div>
                    <div class="notification-list" id="notificationList"></div>
                </div>
            </div>
        </div>
    </header>

    <div class="container">
        <div class="delivery-form">
            <h2 class="form-title">Калькулятор цен</h2>

            <form method="post">
                {% csrf_token %}

                <!-- Очищенный блок с фильтром дат -->
                <div class="form-row dates-filter-row">
                    <div class="filter-info-col">
                        <p class="filter-hint-text">Ищем ставки за последние {{ validity_days }} дней.</p>
                    </div>
                    <div class="filter-control-col">
                        <label class="checkbox-label-wrapper">
                            <input type="checkbox" id="include_all" name="include_all_dates">
                            <span class="checkbox-label-text">Показывать записи за все время</span>
                        </label>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="origin">Откуда</label>
                        <select id="origin" name="origin_city">
                            <option value="">(любая)</option>
                            {% for o in origins %}
                                <option value="{{ o }}">{{ o }}</option>
                            {% endfor %}
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="destination">Куда</label>
                        <select id="destination" name="destination_city">
                            <option value="">(любая)</option>
                            {% for d in destinations %}
                                <option value="{{ d }}">{{ d }}</option>
                            {% endfor %}
                        </select>
                    </div>
                </div>

                <h3 class="options-title">Тип контейнера</h3>
                <div class="options-container" id="containerOptions">
                    <div class="option-card" data-value="20ft">
                        <div class="option-indicator"></div>
                        <div class="option-icon">
                            <img
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMjEyMTIxIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+PHJlY3QgeD0iNCIgeT0iNCIgd2lkdGg9IjE2IiBoZWlnaHQ9IjE2IiByeD0iMiIvPjxsaW5lIHgxPSI4IiB5MT0iNCIgeDI9IjgiIHkyPSIyMCIgb3BhY2l0eT0iMC41Ii8+PHBhdGggZD0iTTE2IDR2MTZNMmE0IDAgMCAxIDQgNGgtMiIvPjwvc3ZnPg=="
                                alt="20ft">
                        </div>
                        <h3>Стандартный</h3>
                        <p>20 футов, до 28 м³</p>
                    </div>
                    <div class="option-card" data-value="40ft">
                        <div class="option-indicator"></div>
                        <div class="option-icon">
                            <img
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMjEyMTIxIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+PHJlY3QgeD0iMiIgeT0iNCIgd2lkdGg9IjIwIiBoZWlnaHQ9IjE2IiByeD0iMiIvPjxsaW5lIHgxPSIxMiIgeTE9IjQiIHgyPSIxMiIgeTI9IjIwIi8+PHBhdGggZD0iTTcgNHYxNk0xNyA0djE2IiBvcGFjaXR5PSIwLjUiLz48L3N2Zz4="
                                alt="40ft">
                        </div>
                        <h3>Большой</h3>
                        <p>40 футов, до 58 м³</p>
                    </div>
                </div>
                <input type="hidden" id="container_type" name="container_type" value="" class="hidden-input">

                <h3 class="options-title">Тип транспорта</h3>
                <div class="options-container" id="transportOptions">
                    <div class="option-card" data-value="авто">
                        <div class="option-indicator"></div>
                        <div class="option-icon">
                            <img
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMjEyMTIxIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+PHJlY3QgeD0iMSIgeT0iMyIgd2lkdGg9IjE1IiBoZWlnaHQ9IjEzIiByeD0iMiIvPjxwb2x5Z29uIHBvaW50cz0iMTYgOCAyMCA4IDIzIDExIDIzIDE2IDE2IDE2IDE2IDgiLz48Y2lyY2xlIGN4PSI1LjUiIGN5PSIxOC41IiByPSIyLjUiLz48Y2lyY2xlIGN4PSIxOC41IiBjeT0iMTguNSIgcj0iMi41Ii8+PC9zdmc+"
                                alt="Авто">
                        </div>
                        <h3>Автомобиль</h3>
                    </div>
                    <div class="option-card" data-value="ж/д">
                        <div class="option-indicator"></div>
                        <div class="option-icon">
                            <?xml version="1.0" encoding="UTF-8"?>
                            <svg id="svg" fill="#000000" stroke="#000000" width="43px" height="43px" version="1.1" viewBox="144 144 512 512" xmlns="http://www.w3.org/2000/svg">
                                <g id="IconSvg_bgCarrier" stroke-width="0"></g>
                                <g id="IconSvg_tracerCarrier" stroke-linecap="round" stroke-linejoin="round" stroke="#CCCCCC"></g>
                                <g id="IconSvg_iconCarrier">
                                    <g xmlns="http://www.w3.org/2000/svg">
                                        <path d="m636.64 472.14c-3.1289 0-5.7266 2.5938-5.7266 5.7266v4.8086l-9.5391-0.003906v-15.418c0-3.1289-2.5938-5.7266-5.7266-5.7266h-10.23c3.2812-4.582 5.3438-10.078 5.3438-16.105v-210.38c0-15.191-12.367-27.559-27.559-27.559h-366.4c-15.191 0-27.559 12.367-27.559 27.559v210.38c0 6.0312 1.9844 11.602 5.3438 16.105h-10.23c-3.1289 0-5.7227 2.5977-5.7227 5.7266v15.418h-9.543v-4.8086c0-3.1289-2.5938-5.7266-5.7266-5.7266-3.1289 0-5.7266 2.5938-5.7266 5.7266v20.992c0 3.1289 2.5938 5.7266 5.7266 5.7266 3.1289 0 5.7266-2.5938 5.7266-5.7266v-4.8086h9.543v15.418c0 3.1289 2.5938 5.7266 5.7266 5.7266h28.621c-9.0078 8.0898-14.734 19.848-14.734 32.898 0 24.504 19.922 44.426 44.426 44.426 16.566 0 30.992-9.1602 38.625-22.672 7.6328 13.512 22.062 22.672 38.703 22.672 24.426 0 44.352-19.922 44.352-44.426 0-13.055-5.7266-24.734-14.734-32.898h100.84c-9.0078 8.0898-14.734 19.848-14.734 32.898 0 24.504 19.922 44.426 44.426 44.426 16.566 0 30.992-9.1602 38.625-22.672 7.6328 13.512 22.062 22.672 38.703 22.672 24.426 0 44.352-19.922 44.352-44.426 0-13.055-5.7266-24.734-14.734-32.898h28.625c3.1289 0 5.7266-2.5938 5.7266-5.7266v-15.418h9.543v4.8086c0 3.1289 2.5938 5.7266 5.7266 5.7266 3.1289 0 5.7266-2.5938 5.7266-5.7266v-20.992c-0.074219-3.1289-2.6719-5.7227-5.8008-5.7227zm-435.95-237.1c0-8.8555 7.25-16.105 16.105-16.105h366.41c8.8555 0 16.105 7.25 16.105 16.105v210.38c0 8.8555-7.25 16.105-16.105 16.105h-366.4c-8.8555 0-16.105-7.25-16.105-16.105zm41.984 346.03c-18.168 0-32.977-14.809-32.977-32.977 0-18.168 14.809-32.898 32.977-32.898 16.184 0 29.617 11.754 32.289 27.176h-21.832c-2.0625-3.7422-5.9531-6.2578-10.457-6.2578-6.6406 0-11.984 5.3438-11.984 11.984s5.3438 11.984 11.984 11.984c4.5039 0 8.3984-2.5195 10.457-6.2578h21.832c-2.7461 15.488-16.105 27.246-32.289 27.246zm29.617-65.801h17.938c-3.5859 3.207-6.6406 6.9453-9.0078 11.145-2.2891-4.1992-5.3398-7.9414-8.9297-11.145zm80.535 32.824c0 18.168-14.734 32.977-32.898 32.977-16.184 0-29.617-11.754-32.367-27.176h21.832c2.0625 3.7422 5.9531 6.2578 10.457 6.2578 6.6406 0 11.984-5.3438 11.984-11.984 0-6.6406-5.3438-11.984-11.984-11.984-4.5039 0-8.4727 2.5195-10.457 6.2578h-21.832c2.75-15.418 16.184-27.176 32.367-27.176 18.164 0.003906 32.898 14.734 32.898 32.828zm127.32 32.977c-18.168 0-32.977-14.809-32.977-32.977 0-18.168 14.809-32.898 32.977-32.898 16.184 0 29.617 11.754 32.289 27.176h-21.832c-2.0625-3.7422-5.9531-6.2578-10.457-6.2578-6.6406 0-11.984 5.3438-11.984 11.984s5.3438 11.984 11.984 11.984c4.5039 0 8.3984-2.5195 10.457-6.2578h21.832c-2.7461 15.488-16.18 27.246-32.289 27.246zm29.621-65.801h17.938c-3.5859 3.207-6.6406 6.9453-9.0078 11.145-2.3672-4.1992-5.418-7.9414-8.9297-11.145zm80.457 32.824c0 18.168-14.734 32.977-32.898 32.977-16.184 0-29.617-11.754-32.367-27.176h21.832c2.0625 3.7422 5.9531 6.2578 10.457 6.2578 6.6406 0 11.984-5.3438 11.984-11.984 0-6.6406-5.3438-11.984-11.984-11.984-4.5039 0-8.4727 2.5195-10.457 6.2578h-21.832c2.75-15.418 16.184-27.176 32.367-27.176 18.164 0.003906 32.898 14.734 32.898 32.828zm19.691-44.277h-419.84v-30.84h419.84z"/>
                                        <path d="m252.45 439.84c11.832 0 21.527-9.6172 21.527-21.527l-0.003906-156.25c0-11.832-9.6172-21.527-21.527-21.527s-21.527 9.6172-21.527 21.527v156.26c0.003907 11.906 9.6211 21.523 21.531 21.523zm-10.078-177.78c0-5.5742 4.5039-10.078 10.078-10.078 5.5742 0 10.078 4.5039 10.078 10.078v156.26c0 5.5742-4.5039 10.078-10.078 10.078-5.5742 0-10.078-4.5039-10.078-10.078z"/>
                                        <path d="m326.18 439.84c11.832 0 21.527-9.6172 21.527-21.527v-156.25c0-11.832-9.6172-21.527-21.527-21.527s-21.527 9.6172-21.527 21.527v156.26c0.078125 11.906 9.6953 21.523 21.527 21.523zm-10-177.78c0-5.5742 4.5039-10.078 10.078-10.078s10.078 4.5039 10.078 10.078v156.26c0 5.5742-4.5039 10.078-10.078 10.078s-10.078-4.5039-10.078-10.078z"/>
                                        <path d="m400 439.84c11.832 0 21.527-9.6172 21.527-21.527l-0.003906-156.25c0-11.832-9.6172-21.527-21.527-21.527s-21.527 9.6172-21.527 21.527v156.26c0.003906 11.906 9.6992 21.523 21.531 21.523zm-10.078-177.78c0-5.5742 4.5039-10.078 10.078-10.078s10.078 4.5039 10.078 10.078v156.26c0 5.5742-4.5039 10.078-10.078 10.078s-10.078-4.5039-10.078-10.078z"/>
                                        <path d="m473.81 439.84c11.832 0 21.527-9.6172 21.527-21.527v-156.25c0-11.832-9.6172-21.527-21.527-21.527s-21.527 9.6172-21.527 21.527v156.26c0.003906 11.906 9.6211 21.523 21.527 21.523zm-10.074-177.78c0-5.5742 4.5039-10.078 10.078-10.078 5.5742 0 10.078 4.5039 10.078 10.078v156.26c0 5.5742-4.5039 10.078-10.078 10.078-5.5742 0-10.078-4.5039-10.078-10.078z"/>
                                        <path d="m547.55 439.84c11.832 0 21.527-9.6172 21.527-21.527l-0.003906-156.25c0-11.832-9.6172-21.527-21.527-21.527-11.91 0-21.527 9.6172-21.527 21.527v156.26c0.082031 11.906 9.6992 21.523 21.531 21.523zm-10-177.78c0-5.5742 4.5039-10.078 10.078-10.078 5.5742 0 10.078 4.5039 10.078 10.078v156.26c0 5.5742-4.5039 10.078-10.078 10.078-5.5742 0-10.078-4.5039-10.078-10.078z"/>
                                    </g>

                                </g>
                            </svg>
                        </div>
                        <h3>Железная дорога</h3>
                    </div>
                    <div class="option-card" data-value="морской">
                        <div class="option-indicator"></div>
                        <div class="option-icon">
                            <img
                                src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzYiIGhlaWdodD0iMzYiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMjAuNDIgMTIuMzY5OUMyMS4yOSAxMi43MTk5IDIxLjgzIDEzLjc0OTkgMjEuNjMgMTQuNjU5OUwyMS4yMiAxNi41MTk5QzIwLjUxIDE5LjcxOTkgMTggMjEuOTk5OSAxNC4zOCAyMS45OTk5SDkuNjE5OThDNS45OTk5OCAyMS45OTk5IDMuNDg5OTkgMTkuNzE5OSAyLjc3OTk5IDE2LjUxOTlMMi4zNjk5OCAxNC42NTk5QzIuMTY5OTggMTMuNzQ5OSAyLjcwOTk3IDEyLjcxOTkgMy41Nzk5NyAxMi4zNjk5TDQuOTk5OTkgMTEuNzk5OUwxMC41MSA5LjU4OTkzQzExLjQ3IDkuMjA5OTMgMTIuNTMgOS4yMDk5MyAxMy40OSA5LjU4OTkzTDE5IDExLjc5OTlMMjAuNDIgMTIuMzY5OVoiIHN0cm9rZT0iIzIxMjEyMSIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz48cGF0aCBkPSJNMTIgMjJWMTAiIHN0cm9rZT0iIzIxMjEyMSIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz48cGF0aCBkPSJNMTkgOFYxMS44TDEzLjQ5IDkuNTlDMTIuNTMgOS4yMSAxMS40NyA5LjIxIDEwLjUxIDkuNTlMNSAxMS44VjhDNSA2LjM1IDYuMzUgNSA4IDVIMTZDMTcuNjUgNSAxOSA2LjM1IDE5IDhaIiBzdHJva2U9IiMyMTIxMjEiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+PHBhdGggZD0iTTE0LjUgNUg5LjVWM0M5LjUgMi40NSA5Ljk1IDIgMTAuNSAySDEzLjVDMTQuMDUgMiAxNC41IDIuNDUgMTQuNSAzVjVaIiBzdHJva2U9IiMyMTIxMjEiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+PC9zdmc+"
                                alt="Море">
                        </div>
                        <h3>Морской транспорт</h3>
                    </div>
                </div>
                <input type="hidden" id="transport_type" name="transport_type" value="" class="hidden-input">


                <button class="submit-btn" type="submit">Посчитать</button>
            </form>

            <div class="result-container" id="resultContainer">
                <div class="result-title">Результаты поиска</div>
                <div id="resultsSummary" class="results-summary-text"></div>
                <div id="resultsTableContainer">
                    <!-- таблица результатов будет вставлена сюда -->
                </div>
            </div>
        </div>
    </div>

    <footer>
        <div class="copyright">&copy; АТК. Все права защищены.</div>
    </footer>
</body>
</html>
