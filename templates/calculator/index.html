<!doctype html>
{% load static %}
<html lang="ru">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Калькулятор цен</title>
    <link rel="stylesheet" href="{% static 'styles/atk_styles.css' %}">
    <link rel="stylesheet" href="{% static 'styles/index.css' %}">
    <script src="{% static 'js_scripts/index.js' %}"></script>
</head>
<body>
    <header>
        <div class="logo">
            <div class="logo-icon">АТК</div>
            <h1>АТК — Калькулятор</h1>
        </div>
        <div class="header-controls">
            <button class="letters-btn" id="lettersBtn">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path
                        d="M4 4H20C21.1 4 22 4.9 22 6V18C22 19.1 21.1 20 20 20H4C2.9 20 2 19.1 2 18V6C2 4.9 2.9 4 4 4Z"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M22 6L12 13L2 6" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                          stroke-linejoin="round"/>
                </svg>
                Управление письмами
            </button>

            <div class="notification-container">
                <button class="notification-btn" id="notificationBtn">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M18 8C18 6.4087 17.3679 4.88258 16.2426 3.75736C15.1174 2.63214 13.5913 2 12 2C10.4087 2 8.88258 2.63214 7.75736 3.75736C6.63214 4.88258 6 6.4087 6 8C6 15 3 17 3 17H21C21 17 18 15 18 8Z"
                            stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path
                            d="M13.73 21C13.5542 21.3031 13.3019 21.5547 12.9982 21.7295C12.6946 21.9044 12.3504 21.9965 12 21.9965C11.6496 21.9965 11.3054 21.9044 11.0018 21.7295C10.6982 21.5547 10.4458 21.3031 10.27 21"
                            stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <div class="notification-indicator" id="notificationIndicator">0</div>
                </button>
                <div class="notification-dropdown" id="notificationDropdown">
                    <div class="notification-header">
                        <h3>Уведомления</h3>
                        <span class="notification-count-text" id="notificationCount">0 новых</span>
                    </div>
                    <div class="notification-list" id="notificationList"></div>
                </div>
            </div>
        </div>
    </header>

    <div class="container">
        <div class="delivery-form">
            <h2 class="form-title">Калькулятор цен</h2>

            <form method="post">
                {% csrf_token %}

                <!-- Очищенный блок с фильтром дат -->
                <div class="form-row dates-filter-row">
                    <div class="filter-info-col">
                        <p class="filter-hint-text">Ищем ставки за последние {{ validity_days }} дней.</p>
                    </div>
                    <div class="filter-control-col">
                        <label class="checkbox-label-wrapper">
                            <input type="checkbox" id="include_all" name="include_all_dates">
                            <span class="checkbox-label-text">Показывать записи за все время</span>
                        </label>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="origin">Откуда</label>
                        <select id="origin" name="origin_city">
                            <option value="">(любая)</option>
                            {% for o in origins %}
                                <option value="{{ o }}">{{ o }}</option>
                            {% endfor %}
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="destination">Куда</label>
                        <select id="destination" name="destination_city">
                            <option value="">(любая)</option>
                            {% for d in destinations %}
                                <option value="{{ d }}">{{ d }}</option>
                            {% endfor %}
                        </select>
                    </div>
                </div>

                <h3 class="options-title">Тип контейнера</h3>
                <div class="options-container" id="containerOptions">
                    <div class="option-card" data-value="20ft">
                        <div class="option-indicator"></div>
                        <div class="option-icon">
                            <img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMjEyMTIxIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+PHJlY3Qgd2lkdGg9IjIwIiBoZWlnaHQ9IjE0IiB4PSIyIiB5PSI1IiByeD0iMiI+PC9yZWN0PjxwYXRoIGQ9Ik0xNiAzSDhNNCA5aDE2TTQgMTVoMTZNOCAxOXY0TTE2IDE5djQiPjwvcGF0aD48L3N2Zz4=" alt="Контейнер">
                        </div>
                        <h3>Стандартный</h3>
                        <p>20 футов, до 28 м³</p>
                    </div>
                    <div class="option-card" data-value="40ft">
                        <div class="option-indicator"></div>
                        <div class="option-icon">
                            <img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMjEyMTIxIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+PHJlY3Qgd2lkdGg9IjIwIiBoZWlnaHQ9IjE2IiB4PSIyIiB5PSI0IiByeD0iMiI+PC9yZWN0PjxwYXRoIGQ9Ik0xNiA0SDhNMTYgMTZIOE0yMCAxMkgyMCI+PC9wYXRoPjwvc3ZnPg==" alt="Большой контейнер">
                        </div>
                        <h3>Большой</h3>
                        <p>40 футов, до 58 м³</p>
                    </div>
                </div>
                <input type="hidden" id="container_type" name="container_type" value="" class="hidden-input">

                <h3 class="options-title">Тип транспорта</h3>
                <div class="options-container" id="transportOptions">
                    <div class="option-card" data-value="авто">
                        <div class="option-indicator"></div>
                        <div class="option-icon">
                            <img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMjEyMTIxIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+PHJlY3Qgd2lkdGg9IjE2IiBoZWlnaHQ9IjE2IiB4PSIyIiB5PSI0IiByeD0iMiI+PC9yZWN0PjxwYXRoIGQ9Ik0yIDhoMTZNMTAgNFYyMCI+PC9wYXRoPjwvc3ZnPg==" alt="Авто">
                        </div>
                        <h3>Автомобиль</h3>
                        <p>Быстрая доставка по стране</p>
                    </div>
                    <div class="option-card" data-value="ж/д">
                        <div class="option-indicator"></div>
                        <div class="option-icon">
                            <img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMjEyMTIxIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+PHBhdGggZD0iTTIgMTBoMTZNMiAxNGgxNk0xMiAydjIwTTQgMThoMTZNNCA2aDE2TTYgMnYyME0xOCAydjIwIj48L3BhdGg+PC9zdmc+" alt="ЖД">
                        </div>
                        <h3>Железная дорога</h3>
                        <p>Экономичная перевозка</p>
                    </div>
                    <div class="option-card" data-value="морской">
                        <div class="option-indicator"></div>
                        <div class="option-icon">
                            <img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMjEyMTIxIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+PHBhdGggZD0iTTIgMjFjOC00IDIwLTggMjAtMTAgMCAyLTQgMy0xMCAxLTYgMi0xMCAzLTEwIDN6Ij48L3BhdGg+PHBhdGggZD0iTTE0IDEzYTQgNCAwIDAgMC00IDQiPjwvcGF0aD48cGF0aCBkPSJNMTggMTNhNCA0IDAgMCAxIDQgNCI+PC9wYXRoPjxwYXRoIGQ9Ik02IDEzYTggOCAwIDAgMSA4IDgiPjwvcGF0aD48L3N2Zz4=" alt="Море">
                        </div>
                        <h3>Морской транспорт</h3>
                        <p>Международные перевозки</p>
                    </div>
                </div>
                <input type="hidden" id="transport_type" name="transport_type" value="" class="hidden-input">


                <button class="submit-btn" type="submit">Посчитать</button>
            </form>

            <div class="result-container" id="resultContainer">
                <div class="result-title">Результаты поиска</div>
                <div id="resultsSummary" class="results-summary-text"></div>
                <div id="resultsTableContainer">
                    <!-- таблица результатов будет вставлена сюда -->
                </div>
            </div>
        </div>
    </div>

    <footer>
        <div class="copyright">&copy; АТК. Все права защищены.</div>
    </footer>
</body>
</html>
